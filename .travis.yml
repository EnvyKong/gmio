language: cpp

sudo: false

_anchors:
  - &gcc49-packages
    apt:
      sources:
      - ubuntu-toolchain-r-test
      packages:
      - gcc-4.9
      - g++-4.9

matrix:
  include:
    # Linux GCC-4.6 debug static coveralls
    - compiler: gcc
      env: TRAVIS_BUILD_TYPE=Debug  TRAVIS_COVERALLS=ON
    # Linux GCC-4.6 debug static google_double-conversion
    - compiler: gcc
      env: TRAVIS_BUILD_TYPE=Debug  TRAVIS_FLOAT2STR_LIB=google_doubleconversion
    # Linux GCC-4.6 debug dll c90
    - compiler: gcc
      env: TRAVIS_BUILD_TYPE=Debug  TRAVIS_SHARED_LIBS=ON  TRAVIS_STRICT_C90=ON
    # Linux GCC-4.9 release static
    - compiler: gcc-4.9
      addons: *gcc49-packages
      env: TRAVIS_BUILD_TYPE=Release  TRAVIS_GCC_VERSION=4.9
    # OSX Clang debug static
    - os: osx
      compiler: clang
      env: TRAVIS_BUILD_TYPE=Debug
    # OSX Clang debug static google_double-conversion
    - os: osx
      compiler: clang
      env: TRAVIS_BUILD_TYPE=Debug  TRAVIS_FLOAT2STR_LIB=google_doubleconversion
    # OSX Clang debug dll c90
    - os: osx
      compiler: clang
      env: TRAVIS_BUILD_TYPE=Debug  TRAVIS_SHARED_LIBS=ON  TRAVIS_STRICT_C90=ON
    # OSX Clang release static
    - os: osx
      compiler: clang
      env: TRAVIS_BUILD_TYPE=Release

script:
  - chmod +x travis-build-script.sh
  - ./travis-build-script.sh
